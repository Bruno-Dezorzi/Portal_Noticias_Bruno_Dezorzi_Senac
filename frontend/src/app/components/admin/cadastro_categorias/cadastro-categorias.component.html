<!DOCTYPE html>
<html lang="pt-br">

<head>
    <title>Cadastro de Categorias - Meu Noticiário</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .navbar {
            background-color: #0d6efd !important;
        }
        
        .navbar-brand, .nav-link {
            color: white !important;
        }
        
        .admin-header {
            background-color: #f8f9fa;
            padding: 20px 0;
            margin-bottom: 30px;
            border-bottom: 1px solid #dee2e6;
        }
        
        .category-card {
            margin-bottom: 20px;
            transition: transform 0.3s;
        }
        
        .category-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }
        
        .admin-sidebar {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 5px;
            height: 100%;
        }
        
        .admin-sidebar .list-group-item.active {
            background-color: #0d6efd;
            border-color: #0d6efd;
        }
        
        .admin-content {
            background-color: #ffffff;
            padding: 25px;
            border-radius: 5px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }
        
        .category-list {
            max-height: 400px;
            overflow-y: auto;
        }
        
        .badge-count {
            font-size: 0.8rem;
            background-color: #0d6efd;
        }
    </style>
</head>

<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container">
            <a class="navbar-brand" href="index.html">Meu Noticiário</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="home.component.html">Início</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="categoria.html?cat=esportes">Esportes</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="categoria.html?cat=lazer">Lazer</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="categoria.html?cat=politica">Política</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="categoria.html?cat=economia">Economia</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="categoria.html?cat=internacional">Internacional</a>
                    </li>
                </ul>
                <form class="d-flex" role="search">
                    <input class="form-control me-2" type="search" placeholder="Buscar notícias" aria-label="Search">
                    <button class="btn btn-outline-light" type="submit">Buscar</button>
                </form>
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="adminDropdown" role="button"
                            data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="fas fa-user-shield me-1"></i> Admin
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="adminDropdown">
                            <li><a class="dropdown-item" href="admin-dashboard.html">Dashboard</a></li>
                            <li><a class="dropdown-item" href="admin-noticias.html">Gerenciar Notícias</a></li>
                            <li><a class="dropdown-item active" href="admin-categorias.html">Gerenciar Categorias</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="#" id="logoutBtn">Sair</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Admin Header -->
    <div class="admin-header">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-6">
                    <h2><i class="fas fa-tags me-2"></i> Gerenciamento de Categorias</h2>
                    <p class="text-muted">Adicione, edite ou exclua categorias de notícias do portal</p>
                </div>
                <div class="col-md-6 text-md-end">
                    <nav aria-label="breadcrumb">
                        <ol class="breadcrumb justify-content-md-end mb-0">
                            <li class="breadcrumb-item"><a href="index.html">Início</a></li>
                            <li class="breadcrumb-item"><a href="admin-dashboard.html">Admin</a></li>
                            <li class="breadcrumb-item active" aria-current="page">Categorias</li>
                        </ol>
                    </nav>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="container mb-5">
        <div class="row">
            <!-- Sidebar -->
            <div class="col-lg-3 mb-4">
                <div class="admin-sidebar">
                    <h5 class="mb-3">Painel Administrativo</h5>
                    <div class="list-group">
                        <a href="admin-dashboard.html" class="list-group-item list-group-item-action">
                            <i class="fas fa-tachometer-alt me-2"></i> Dashboard
                        </a>
                        <a href="admin-noticias.html" class="list-group-item list-group-item-action">
                            <i class="fas fa-newspaper me-2"></i> Gerenciar Notícias
                        </a>
                        <a href="admin-categorias.html" class="list-group-item list-group-item-action active">
                            <i class="fas fa-tags me-2"></i> Gerenciar Categorias
                        </a>
                        <a href="admin-usuarios.html" class="list-group-item list-group-item-action">
                            <i class="fas fa-users me-2"></i> Gerenciar Usuários
                        </a>
                        <a href="admin-comentarios.html" class="list-group-item list-group-item-action">
                            <i class="fas fa-comments me-2"></i> Gerenciar Comentários
                        </a>
                        <a href="admin-configuracoes.html" class="list-group-item list-group-item-action">
                            <i class="fas fa-cog me-2"></i> Configurações
                        </a>
                    </div>
                </div>
            </div>
            
            <!-- Main Content -->
            <div class="col-lg-9">
                <div class="row">
                    <!-- Form for adding/editing categories -->
                    <div class="col-md-5">
                        <div class="admin-content">
                            <h4 class="mb-4" id="formTitle">Adicionar Nova Categoria</h4>
                            <form id="categoryForm">
                                <input type="hidden" id="categoryId" value="">
                                
                                <div class="mb-3">
                                    <label for="categoryName" class="form-label">Nome da Categoria</label>
                                    <input type="text" class="form-control" id="categoryName" required 
                                           placeholder="Ex: Tecnologia, Saúde, Ciência...">
                                </div>
                                
                                <div class="mb-3">
                                    <label for="categorySlug" class="form-label">Slug (URL)</label>
                                    <div class="input-group">
                                        <span class="input-group-text">categoria.html?cat=</span>
                                        <input type="text" class="form-control" id="categorySlug" required 
                                               placeholder="tecnologia">
                                    </div>
                                    <div class="form-text">Identificador único usado na URL (sem espaços ou caracteres especiais)</div>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="categoryDescription" class="form-label">Descrição</label>
                                    <textarea class="form-control" id="categoryDescription" rows="3" 
                                              placeholder="Breve descrição da categoria..."></textarea>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="categoryIcon" class="form-label">Ícone</label>
                                    <div class="input-group">
                                        <span class="input-group-text"><i class="fas fa-icons"></i></span>
                                        <input type="text" class="form-control" id="categoryIcon" 
                                               placeholder="fa-newspaper">
                                    </div>
                                    <div class="form-text">Classe do ícone Font Awesome (ex: fa-futbol, fa-film, fa-chart-line)</div>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="categoryColor" class="form-label">Cor</label>
                                    <input type="color" class="form-control form-control-color" id="categoryColor" 
                                           value="#0d6efd" title="Escolha uma cor para a categoria">
                                </div>
                                
                                <div class="mb-3 form-check">
                                    <input type="checkbox" class="form-check-input" id="categoryFeatured">
                                    <label class="form-check-label" for="categoryFeatured">Destacar no menu principal</label>
                                </div>
                                
                                <div class="d-flex justify-content-between">
                                    <button type="button" class="btn btn-secondary" id="cancelEditBtn" style="display: none;">
                                        <i class="fas fa-times me-1"></i> Cancelar
                                    </button>
                                    <button type="submit" class="btn btn-primary" id="submitBtn">
                                        <i class="fas fa-save me-1"></i> Salvar Categoria
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                    
                    <!-- List of categories -->
                    <div class="col-md-7">
                        <div class="admin-content">
                            <div class="d-flex justify-content-between align-items-center mb-4">
                                <h4 class="mb-0">Categorias Existentes</h4>
                                <div class="input-group w-50">
                                    <input type="text" class="form-control" id="searchCategory" placeholder="Buscar categoria...">
                                    <button class="btn btn-outline-secondary" type="button">
                                        <i class="fas fa-search"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="category-list">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th scope="col" width="5%">#</th>
                                            <th scope="col" width="35%">Nome</th>
                                            <th scope="col" width="20%">Notícias</th>
                                            <th scope="col" width="20%">Destaque</th>
                                            <th scope="col" width="20%">Ações</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>1</td>
                                            <td>
                                                <div class="d-flex align-items-center">
                                                    <span class="rounded-circle me-2" style="width: 15px; height: 15px; background-color: #0d6efd;"></span>
                                                    <span><i class="fas fa-futbol me-1"></i> Esportes</span>
                                                </div>
                                            </td>
                                            <td><span class="badge bg-primary badge-count">14</span></td>
                                            <td><i class="fas fa-check-circle text-success"></i></td>
                                            <td>
                                                <button class="btn btn-sm btn-outline-primary me-1 edit-btn" data-id="1">
                                                    <i class="fas fa-edit"></i>
                                                </button>
                                                <button class="btn btn-sm btn-outline-danger delete-btn" data-id="1">
                                                    <i class="fas fa-trash"></i>
                                                </button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>2</td>
                                            <td>
                                                <div class="d-flex align-items-center">
                                                    <span class="rounded-circle me-2" style="width: 15px; height: 15px; background-color: #6610f2;"></span>
                                                    <span><i class="fas fa-film me-1"></i> Lazer</span>
                                                </div>
                                            </td>
                                            <td><span class="badge bg-primary badge-count">8</span></td>
                                            <td><i class="fas fa-check-circle text-success"></i></td>
                                            <td>
                                                <button class="btn btn-sm btn-outline-primary me-1 edit-btn" data-id="2">
                                                    <i class="fas fa-edit"></i>
                                                </button>
                                                <button class="btn btn-sm btn-outline-danger delete-btn" data-id="2">
                                                    <i class="fas fa-trash"></i>
                                                </button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>3</td>
                                            <td>
                                                <div class="d-flex align-items-center">
                                                    <span class="rounded-circle me-2" style="width: 15px; height: 15px; background-color: #dc3545;"></span>
                                                    <span><i class="fas fa-landmark me-1"></i> Política</span>
                                                </div>
                                            </td>
                                            <td><span class="badge bg-primary badge-count">12</span></td>
                                            <td><i class="fas fa-check-circle text-success"></i></td>
                                            <td>
                                                <button class="btn btn-sm btn-outline-primary me-1 edit-btn" data-id="3">
                                                    <i class="fas fa-edit"></i>
                                                </button>
                                                <button class="btn btn-sm btn-outline-danger delete-btn" data-id="3">
                                                    <i class="fas fa-trash"></i>
                                                </button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>4</td>
                                            <td>
                                                <div class="d-flex align-items-center">
                                                    <span class="rounded-circle me-2" style="width: 15px; height: 15px; background-color: #198754;"></span>
                                                    <span><i class="fas fa-chart-line me-1"></i> Economia</span>
                                                </div>
                                            </td>
                                            <td><span class="badge bg-primary badge-count">10</span></td>
                                            <td><i class="fas fa-check-circle text-success"></i></td>
                                            <td>
                                                <button class="btn btn-sm btn-outline-primary me-1 edit-btn" data-id="4">
                                                    <i class="fas fa-edit"></i>
                                                </button>
                                                <button class="btn btn-sm btn-outline-danger delete-btn" data-id="4">
                                                    <i class="fas fa-trash"></i>
                                                </button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>5</td>
                                            <td>
                                                <div class="d-flex align-items-center">
                                                    <span class="rounded-circle me-2" style="width: 15px; height: 15px; background-color: #fd7e14;"></span>
                                                    <span><i class="fas fa-globe-americas me-1"></i> Internacional</span>
                                                </div>
                                            </td>
                                            <td><span class="badge bg-primary badge-count">6</span></td>
                                            <td><i class="fas fa-check-circle text-success"></i></td>
                                            <td>
                                                <button class="btn btn-sm btn-outline-primary me-1 edit-btn" data-id="5">
                                                    <i class="fas fa-edit"></i>
                                                </button>
                                                <button class="btn btn-sm btn-outline-danger delete-btn" data-id="5">
                                                    <i class="fas fa-trash"></i>
                                                </button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>6</td>
                                            <td>
                                                <div class="d-flex align-items-center">
                                                    <span class="rounded-circle me-2" style="width: 15px; height: 15px; background-color: #0dcaf0;"></span>
                                                    <span><i class="fas fa-microchip me-1"></i> Tecnologia</span>
                                                </div>
                                            </td>
                                            <td><span class="badge bg-primary badge-count">4</span></td>
                                            <td><i class="fas fa-times-circle text-muted"></i></td>
                                            <td>
                                                <button class="btn btn-sm btn-outline-primary me-1 edit-btn" data-id="6">
                                                    <i class="fas fa-edit"></i>
                                                </button>
                                                <button class="btn btn-sm btn-outline-danger delete-btn" data-id="6">
                                                    <i class="fas fa-trash"></i>
                                                </button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header bg-danger text-white">
                    <h5 class="modal-title" id="deleteModalLabel">Confirmar Exclusão</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>Tem certeza que deseja excluir a categoria <strong id="deleteCategoryName">Nome da Categoria</strong>?</p>
                    <p class="text-danger"><i class="fas fa-exclamation-triangle me-2"></i> Esta ação não pode ser desfeita e todas as notícias associadas perderão a categorização.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-danger" id="confirmDeleteBtn">Sim, Excluir</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-dark text-white mt-5 py-4">
        <div class="container">
            <div class="row">
                <div class="col-md-4">
                    <h5>Meu Noticiário</h5>
                    <p>Seu portal de notícias completo e atualizado sobre os principais acontecimentos do Brasil e do mundo.</p>
                </div>
                <div class="col-md-4">
                    <h5>Links Rápidos</h5>
                    <ul class="list-unstyled">
                        <li><a href="#" class="text-white">Início</a></li>
                        <li><a href="#" class="text-white">Últimas Notícias</a></li>
                        <li><a href="#" class="text-white">Contato</a></li>
                        <li><a href="#" class="text-white">Política de Privacidade</a></li>
                    </ul>
                </div>
                <div class="col-md-4">
                    <h5>Contato</h5>
                    <address>
                        <strong>Meu Noticiário LTDA</strong><br>
                        Av. Paulista, 1000<br>
                        São Paulo, SP 01310-100<br>
                        <i class="fas fa-phone"></i> (11) 3456-7890<br>
                        <i class="fas fa-envelope"></i> 
                    </address>
                </div>
            </div>
            <hr>
            <div class="text-center">
                <p>&copy; 2024 Meu Noticiário. Todos os direitos reservados.</p>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Delete modal functionality
            const deleteButtons = document.querySelectorAll('.delete-btn');
            deleteButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const categoryId = this.getAttribute('data-id');
                    const categoryRow = this.closest('tr');
                    const categoryName = categoryRow.querySelector('td:nth-child(2)').textContent.trim();
                    
                    document.getElementById('deleteCategoryName').textContent = categoryName;
                    document.getElementById('confirmDeleteBtn').setAttribute('data-id', categoryId);
                    
                    const deleteModal = new bootstrap.Modal(document.getElementById('deleteModal'));
                    deleteModal.show();
                });
            });
            
            // Edit functionality
            const editButtons = document.querySelectorAll('.edit-btn');
            editButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const categoryId = this.getAttribute('data-id');
                    const categoryRow = this.closest('tr');
                    const categoryName = categoryRow.querySelector('td:nth-child(2) span:last-child').textContent.trim().replace(/^\S+\s/, ''); // Remove icon
                    const categoryIcon = categoryRow.querySelector('td:nth-child(2) i').className.split(' ')[1];
                    const categoryColor = categoryRow.querySelector('td:nth-child(2) span:first-child').style.backgroundColor;
                    const categoryFeatured = categoryRow.querySelector('td:nth-child(4) i').classList.contains('text-success');
                    
                    // Fill the form with category data
                    document.getElementById('categoryId').value = categoryId;
                    document.getElementById('categoryName').value = categoryName;
                    document.getElementById('categorySlug').value = categoryName.toLowerCase().normalize('NFD').replace(/[\u0300-\u036f]/g, '').replace(/\s+/g, '-');
                    document.getElementById('categoryIcon').value = categoryIcon;
                    document.getElementById('categoryColor').value = rgbToHex(categoryColor);
                    document.getElementById('categoryFeatured').checked = categoryFeatured;
                    
                    // Change form title and show cancel button
                    document.getElementById('formTitle').textContent = 'Editar Categoria';
                    document.getElementById('submitBtn').innerHTML = '<i class="fas fa-save me-1"></i> Atualizar Categoria';
                    document.getElementById('cancelEditBtn').style.display = 'block';
                    
                    // Scroll to form
                    document.querySelector('.admin-content').scrollIntoView({behavior: 'smooth'});
                });
            });
            
            // Cancel edit button
            document.getElementById('cancelEditBtn').addEventListener('click', function() {
                resetForm();
            });
            
            // Form submission
            document.getElementById('categoryForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Get form data
                const categoryId = document.getElementById('categoryId').value;
                const categoryName = document.getElementById('categoryName').value;
                
                // Show success message (would normally save to database)
                alert(`Categoria "${categoryName}" ${categoryId ? 'atualizada' : 'adicionada'} com sucesso!`);
                
                // Reset form
                resetForm();
            });
            
            // Function to reset form
            function resetForm() {
                document.getElementById('categoryForm').reset();
                document.getElementById('categoryId').value = '';
                document.getElementById('formTitle').textContent = 'Adicionar Nova Categoria';
                document.getElementById('submitBtn').innerHTML = '<i class="fas fa-save me-1"></i> Salvar Categoria';
                document.getElementById('cancelEditBtn').style.display = 'none';
                document.getElementById('categoryColor').value = '#0d6efd';
            }
            
            // Function to convert RGB to HEX
            function rgbToHex(rgb) {
                if (!rgb) return '#0d6efd';
                
                // If rgb is already a hex value
                if (rgb.startsWith('#')) return rgb;
                
                // Parse RGB
                const rgbArray = rgb.match(/\d+/g);
                if (!rgbArray || rgbArray.length < 3) return '#0d6efd';
                
                const r = parseInt(rgbArray[0]);
                const g = parseInt(rgbArray[1]);
                const b = parseInt(rgbArray[2]);
                
                return '#' + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);
            }
            
            // Auto-generate slug from category name
            document.getElementById('categoryName').addEventListener('input', function() {
                const name = this.value;
                const slug = name.toLowerCase()
                    .normalize('NFD')
                    .replace(/[\u0300-\u036f]/g, '') // Remove acentos
                    .replace(/[^\w\s-]/g, '') // Remove caracteres especiais
                    .replace(/\s+/g, '-') // Substitui espaços por hifens
                    .replace(/-+/g, '-'); // Remove hifens duplicados
                
                document.getElementById('categorySlug').value = slug;
            });
            
            // Simulate logout
            document.getElementById('logoutBtn').addEventListener('click', function() {
                localStorage.removeItem('isLoggedIn');
                window.location.href = 'index.html';
            });
        });
    </script>
</body>

</html>